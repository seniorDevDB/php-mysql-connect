<!DOCTYPE html>
<html>
<head>
	<style>
		table, th, td {
		  border: 1px solid black;
		  border-collapse: collapse;
		}
		th, td {
		  padding: 5px;
		  text-align: left;
		}

	</style>
</head>
<body>

<h2>PHP, SQL TEST</h2>


<div style="width: 100%; height: 100px;"></div>
<div style="width: 100%;">
	<form style="float:left; width:80%;margin-left:10%;" id = "classForm" action="connection.php" method="post">
		<input type="text" name="requesttype" style="display: none" value="1">
		<table style="margin: 0 auto; width:90%;">
		  <caption>Input Class Data</caption>
		  <tr>
		    <th>Name</th>
		    <th>Students</th>
		  </tr>
		  <tr>
		  	
		    <td><input style="width: 100%" type="text" name="className" id ="className"></td>
		    <td><input style="width: 100%" type="text" name="students" id = "classStudents"></td>
		  </tr>
		</table>
		<button type="submit" id = "addClassBtn" style = "height:30px;margin-top: 32px;margin-left:45%;">ADD CLASS DATA</button>
	</form>

</div>

<div style="width: 100%; margin-top: 50px;">
	<form style="float:left; width:80%;margin-top: 50px;margin-left:10%;" id = "textbookForm" action="connection.php" method="post">
		<input type="text" name="requesttype" style="display: none" value="2">
		<table style="margin: 0 auto; width:90%;">
		  <caption>Input Textbook yes,</caption>
		  <tr>
		    <th>Class</th>
		    <th>Textbook Name</th>
		    <th>Author</th>
		    <th>Cost</th>
		  </tr>
		  <tr>
		    <td>
		    	<select style="width: 100%" id ="classSelect" type="text" name ="class">
				</select>
			</td>
		    <td><input style="width: 100%" type="text" name ="textbookName"></td>
		    <td><input style="width: 100%" type="text" name ="author"></td>
		    <td><input style="width: 100%" type="text" name ="cost"></td>
		  </tr>
		</table>
		  <button type="submit" id = "addTextbookBtn" style = "height:30px;margin-top: 32px;margin-left:45%;">ADD Textbook DATA</button>

	</form>
</div>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script> 

<script type="text/javascript">

	  	$.post("connection.php", {requesttype: 3}, function(result){
	  			console.log(Object.keys(JSON.parse(result)).length);
	  			for (var i = 0; i < Object.keys(JSON.parse(result)).length; i++) {
	  				var x = document.getElementById("classSelect");
					var option = document.createElement("option");
					option.text = JSON.parse(result)[i].id;
					x.add(option);
	  			}
	  	});
		$("#classForm").ajaxForm({
            success: function(data){
               	alert(data);
             }
		});

		$("#textbookForm").ajaxForm({
            success: function(data){
            	alert(data);
            }
		});

</script>
</body>
</html>